# 泛型集合

泛型最重要的应用就是集合操作，使用泛型集合可以提高代码重用性，类型安全和更佳的性能.

泛型集合需要引入 : **System.Collection.Generic** 命名空间.

泛型集合可以约束集合内的元素类型，编译时检查类型的约束.

**List<T>** 的用法 和 **ArrayList** 相似.

**List<T>** 有更好的安全性，无需拆、装箱.

在泛型定义中，泛型类型参数 **<T>** 是必须指定的.

其中 **T** 是定义泛型类时的占位符，其并不是一种类型，仅代表某种可能的类型，在定义时 **T** 会被使用的类型代替.

泛型集合 **List<T>** 中只能有一个 参数类型, **<T>** 中的 **T** 可以对集合中的元素类型进行约束.


## List<T> 与 ArrayList 的比较

| 异同点 | List<T> | ArrayList |
|-------|---------|-----------|
| 不同点 | 增加元素时类型严格检查 <br> <hr> 无需拆、装箱操作 | 可以增加任何类型 <br> <hr> 需要拆、装箱操作|
|相同点|通过索引访问集合的元素 <br> <hr> 添加对象方法相同 <br> <hr> 通过索引删除元素 |same with left|



## 一般数组、ArrayList、List<T> 比较

- 一般数组 ：长度不可变，类型固定.
  
- ArrayList ： 长度可变，类型不固定.
  
- List<T>  泛型集合 ： 长度可变，类型固定.

## 处理同一类型数据元素

**1. 方法1 ： foeach - is 判断 : **

```C#
foreach(var item in collection)
{
    if(item is Target_type)
    {
        // code
    }
}
```

**2. 源头上约束，使用 泛型集合**

```C#
foreach(Target_type in collection_generic)
{
   // code
}
```


```C#
using System;
using System.Collections;
using System.Collections.Generic;

namespace Test1
{
    class Test
    {
        static void Main(string[] args)
        {
            // 一般数组 长度不可变 类型固定
             ArrayList arr = new ArrayList();
            arr.Add(1);             //  装箱
            int n = (int)arr[0];    //  拆箱

            // 保证打印同一类型的元素

            Console.WriteLine("Print same type elements ： ");

            Console.WriteLine("\nforeach - is judgement ");

            ArrayList lsit = new ArrayList();

            lsit.Add(2);
            lsit.Add(3);
            lsit.Add(4);
            lsit.Add("abc");

            // 方法1 ： foeach - is 判断
            foreach(var item in lsit)
            {
                if(item is int)
                {
                    Console.Write(item + " ");
                }
            }

            Console.WriteLine("\n\nConstraint in origin，use generic collection：");
            // 方法2：源头上约束，使用 泛型集合
            List<int> list_generic = new List<int>();
            list_generic.Add(1);
            list_generic.Add(2);
            list_generic.Add(3);
            list_generic.Add(4);

            foreach(int item in list_generic)
            {
                Console.Write(item + " ");
            }
        }
    }
}
```
```
output:

Print same type elements :

foreach - is judgement
2 3 4

Constraint in origin,use generic collection:
1 2 3 4
```
## 泛型集合优点
1. 泛型集合与传统集合相比类型更安全
2. 泛型集合无需装箱拆箱操作
3. 泛型的重要性
4. 泛型是为了五年的主流技术之一
5. 解决了很多需要繁琐操作的问题
6. CLR 支持泛型