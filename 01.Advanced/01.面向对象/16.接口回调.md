# 接口回调

接口也是引用类型，指向接口的引用也可以指向任意实现了该接口的类创建的实例.

接口回调，即接口的引用可以指向实现了接口的类的实例.

接口回调均可以访问到实现类里实现的方法.

## 注意

显式实现的方法只能用接口回调调用到，无法用实例类引用调用到.

```C#
// 示例
public interface IHello
{
    void Bellow();
}
```

```C#
using System;

namespace Test
{
    class InterfaceTest
    {
        static void Main(string[] args)
        {
            // 接口的引用指向 实现了 引用接口类的实例
            // Dog 继承了 I_Animal_1 接口
            // 显式实现的方法只能用接口回调调用到，无法用实例类引用调用到
            I_Animal_1 a = new Dog();
            a.Walk();

            Dog b = new Dog();

            //  不安全，无法保证待转换的对象所在的类确实实现了该接口， 可能出现空指针
            // (b as I_Animal_2).Walk();

            I_Animal_2 i = b as I_Animal_2;

            /**
             * 将 Dog b = new Dog(); 和 I_Animal_2 i = b as I_Animal_2; 
             * 
             * 合并成一句 I_Animal_2 i = new Dog();
             */
            if(i != null)
            {
                i.Walk();
            }
        }
        
    }

    public interface I_Animal_1
    {
        // 接口中的成员方法声明均为 public，可以省略不写
        void Eat();
        void Drink();

        void Walk();
    }

    public interface I_Animal_2
    {
        void Sleep();
        void Yell();
        void Walk();
    }

    public class Dog : I_Animal_1,I_Animal_2
    {
        // 接口是多继承的，类是单继承的
        // 继承自接口的类必须 全部 实现 接口中的方法，否则报错

        // 继承多接口，非重名方法，隐式实现
        public void Eat()
        {
            Console.WriteLine("Dog eats...");
        }

        public void Drink()
        {
            Console.WriteLine("Dog drinks...");
        }

        public void Sleep()
        {
            Console.WriteLine("Dog Sleeps...");
        }

        public void Yell()
        {
            Console.WriteLine("Dog yells...");
        }

        // 继承多接口，重名方法，显式实现
        void I_Animal_1.Walk()
        {
            Console.WriteLine("Dog walks_1...");
        }
        void I_Animal_2.Walk()
        {
            Console.WriteLine("Dog walks_2...");
        }
    }
}
```

```
output:

Dog walks_1...
Dog walks_2...
```